var E=Object.defineProperty;var T=(o,e,t)=>e in o?E(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var r=(o,e,t)=>(T(o,typeof e!="symbol"?e+"":e,t),t);class a{static getWidth(){return document.documentElement.clientWidth}static getHeight(){return document.documentElement.clientHeight}static getWidthAndHeight(){return[a.getWidth(),a.getHeight()]}static getScrollWidth(){return document.documentElement.scrollWidth}static getScrollHeight(){return document.documentElement.scrollHeight}static getScrollWidthAndHeight(){return[a.getScrollWidth(),a.getScrollHeight()]}static getScrollLeft(){return document.documentElement.scrollLeft}static getScrollTop(){return document.documentElement.scrollTop}static getScrollLeftAndTop(){return[a.getScrollLeft(),a.getScrollTop()]}static getScrollDistToTop(){const e=document.documentElement.scrollTop||document.body.scrollTop||0;return Math.round(e)}static getScrollDistToBottom(){const e=document.documentElement.scrollHeight-document.documentElement.scrollTop-document.documentElement.clientHeight;return Math.round(e)}}const p=(o)=>{var e=sessionStorage.getItem("isDebug")==="true";e&&o()};function S(o,e=1e3){var t=null;return function(...n){var i=this;t&&clearTimeout(t),t=window.setTimeout(()=>{o.apply(i,n)},e)}}function c(o,e=160){let t;var n=+new Date();return function(...i){let l=this,g=+new Date()-0;window.clearTimeout(t),g-n>=e?(o.apply(l,i),n=g):t=window.setTimeout(()=>{o.apply(this,i)},e)}}const v=(o)=>{const e={};for(let t in Object.getOwnPropertyDescriptors(o))["length","name","prototype"].includes(t)||(p(()=>{console.log(t)}),typeof o[t]=="function"&&(e[t]=o[t]));return e},w=class{static getWidth(e,t){return t?e.offsetWidth:e.clientWidth}static getHeight(e,t){return t?e.offsetHeight:e.clientHeight}};let f=w;r(f,"getWidthAndHeight",(e,t)=>[w.getWidth(e,t),w.getHeight(e,t)]);class _{static getScrollWidth(e){return e.scrollWidth}static getScrollHeight(e){return e.scrollHeight}static getScrollWidthAndHeight(e){return[this.getScrollWidth(e),this.getScrollHeight(e)]}static getScrollLeft(e){return e.scrollLeft}static getScrollTop(e){return e.scrollTop}static getScrollLeftAndTop(e){return[this.getScrollLeft(e),this.getScrollTop(e)]}}class A{static getPositionInViewport(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top,width:t.width,height:t.height}}static getElementLeftInDoc(e){for(var t=e.offsetLeft,n=e.offsetParent;typeof n<"u"&&n!==null;)t+=n.offsetLeft,n=n.offsetParent;return t}static getElementTopInDoc(e){for(var t=e.offsetTop,n=e.offsetParent;typeof n<"u"&&n!==null;)t+=n.offsetTop,n=n.offsetParent;return t}static getPositionInDoc(e){var t={x:this.getElementLeftInDoc(e),y:this.getElementTopInDoc(e),width:f.getWidth(e,!0),height:f.getHeight(e,!0)};return t}}class W{static focus(e){e.focus()}}const x={...v(f),...v(_),...v(A),...v(W)},h=(o)=>(typeof o=="string"&&(o=document.querySelector(o)),o),k=(o,e,t=null)=>{let n=h(o);return n?t?(n.setAttribute(e,t),t):n.getAttribute(e):null},K=(o,e)=>{let t=h(o);t&&(typeof e=="string"?t.classList.add(e):t.classList.add(...e))},Y=(o,e)=>{let t=h(o);t&&(typeof e=="string"?t.classList.remove(e):t.classList.remove(...e))},X=(o,e,t=null)=>{if(typeof e=="string"){if(t===null){let i=e.split(";");for(let l=0;l<i.length;l++){let g=i[l];if(!g)continue;let d=g.split(":");o.style.setProperty(d[0],d[1])}return}o.style.setProperty(e,t)}else for(let n in e)e.hasOwnProperty(n)&&o.style.setProperty(n,e[n])},P=Object.freeze(Object.defineProperty({__proto__:null,getDom:h,attr:k,addCls:K,removeCls:Y,css:X},Symbol.toStringTag,{value:"Module"})),m=new Map(),B={inViewport:!0};class D{constructor(e,t,n){r(this,"_trigger");r(this,"_container");r(this,"_options",null);r(this,"_state",null);r(this,"_isFirst",!0);r(this,"_style",null);r(this,"onMousedown",(e)=>{e.stopPropagation(),p(()=>{console.log("onMousedown")});const t=this._state;t.isInDrag=!0,t.mX=e.clientX,t.mY=e.clientY;const{left:n,top:i}=this.getContainerPos();this._container.style.position="absolute",p(()=>{console.log("this._isFirst",this._isFirst,n,i)}),t.domMaxY=document.documentElement.clientHeight-this._container.offsetHeight-1,t.domMaxX=document.documentElement.clientWidth-this._container.offsetWidth-1,t.domMaxY=t.domMaxY<0?0:t.domMaxY,t.domMaxX=t.domMaxX<0?0:t.domMaxX,this._isFirst&&(this._container.style.left=n+"px",this._container.style.top=i+"px",this._style||(this._style=this._container.getAttribute("style")),this._isFirst=!1),t.domStartX=n,t.domStartY=i});r(this,"onMouseup",(e)=>{e.stopPropagation();const t=this._state;t.isInDrag=!1;const{left:n,top:i}=this.getContainerPos();t.domStartX=n,t.domStartY=i});r(this,"onMousemove",c((e)=>{const t=this._state;if(t.isInDrag){var n=e.clientX,i=e.clientY,l=n-t.mX,g=i-t.mY,d=t.domStartX+l,y=t.domStartY+g;this._options.inViewport&&(d<0?d=0:d>t.domMaxX&&(d=t.domMaxX),y<0?y=0:y>t.domMaxY&&(y=t.domMaxY)),this._container.style.margin="0",this._container.style.paddingBottom="0",this._container.style.left=d+"px",this._container.style.top=y+"px"}},10).bind(this));r(this,"onResize",c((e)=>{const t=this._state;t.domMaxY=document.documentElement.clientHeight-this._container.offsetHeight-1,t.domMaxX=document.documentElement.clientWidth-this._container.offsetWidth-1,t.domMaxY=t.domMaxY<0?0:t.domMaxY,t.domMaxX=t.domMaxX<0?0:t.domMaxX,t.domStartY=parseInt(this._container.style.top),t.domStartX=parseInt(this._container.style.left),t.domStartY>t.domMaxY&&t.domMaxY>0&&(this._container.style.top=t.domMaxY+"px"),t.domStartX>t.domMaxX&&(this._container.style.left=t.domMaxX+"px")},10).bind(this));this._trigger=e,this._container=t,this._options=Object.assign({},B,{inViewport:n}),this._state={isInDrag:!1,mX:0,mY:0,domStartX:0,domStartY:0}}getContainerPos(){const e=this._container.getBoundingClientRect();return{left:e.left,top:e.top}}bindDrag(){const e=this._trigger,t=this._options;e.addEventListener("mousedown",this.onMousedown,!1),window.addEventListener("mouseup",this.onMouseup,!1),document.addEventListener("mousemove",this.onMousemove),t.inViewport&&window.addEventListener("resize",this.onResize,!1)}unbindDrag(){this._trigger.removeEventListener("mousedown",this.onMousedown,!1),window.removeEventListener("mouseup",this.onMouseup,!1),document.removeEventListener("mousemove",this.onMousemove),this._options.inViewport&&window.removeEventListener("resize",this.onResize,!1)}resetContainerStyle(){this._style!==null&&(this._isFirst=!0,this._container.setAttribute("style",this._style))}}function b(o,e,t=!0){let n=h(o);if(n!=null){let i=m.get(n);i||(i=new D(n,h(e),t),m.set(n,i)),i.bindDrag()}}function L(o){let e=h(o);if(e!=null){const t=m.get(e);t&&t.unbindDrag()}}function H(o){let e=h(o);if(e!=null){const t=m.get(e);t&&t.resetContainerStyle()}}const Q=(o,e)=>{b(e.dragElement,o,e.inViewport)},C=Object.freeze(Object.defineProperty({__proto__:null,bindDrag:Q,addDraggable:b,removeDraggable:L,resetDraggableElePosition:H},Symbol.toStringTag,{value:"Module"}));var s={toMouseEvent(o){return{detail:o.detail,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY,button:o.button,buttons:o.buttons,ctrlKey:o.ctrlKey,shiftKey:o.shiftKey,altKey:o.altKey,metaKey:o.metaKey,type:o.type}},toFocusEventArgs(o){return{type:o.type}},toTouchEventArgs(o){return{detail:o.detail,touches:s.toTouchPoints(o.touches),targetTouches:s.toTouchPoints(o.targetTouches),changedTouches:s.toTouchPoints(o.changedTouches),ctrlKey:o.ctrlKey,shiftKey:o.shiftKey,altKey:o.altKey,metaKey:o.metaKey,type:o.type}},toKeyboardEventArgs(o){return{key:o.key,code:o.code,location:o.location,repeat:o.repeat,ctrlKey:o.ctrlKey,shiftKey:o.shiftKey,altKey:o.altKey,metaKey:o.metaKey,type:o.type}},toTouchPoints(o){for(var e=[],t=0;t<o.length;t++)e.push(s.toTouchPoint(o[t]));return e},toTouchPoint(o){return{identifier:o.identifier,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY,pageX:o.pageX,pageY:o.pageY}}};const u=80,M=230,I=()=>{var o=window.DotNet,e,t;window.onclick=(n)=>{var i=s.toMouseEvent(n),l=new Date().getTime();e&&l-e<M?(window.clearTimeout(t),o.invokeMethodAsync("BQuery","WindowDbClick",i),e=null):(t=window.setTimeout(()=>{o.invokeMethodAsync("BQuery","WindowClick",i)},M),e=l)},window.oncontextmenu=(n)=>{var i=s.toMouseEvent(n);o.invokeMethodAsync("BQuery","WindowContextMenu",i)},window.onmousedown=(n)=>{var i=s.toMouseEvent(n);o.invokeMethodAsync("BQuery","WindowMouseDown",i)},window.onmouseup=(n)=>{var i=s.toMouseEvent(n);o.invokeMethodAsync("BQuery","WindowMouseUp",i)},window.onmouseover=c((n)=>{var i=s.toMouseEvent(n);o.invokeMethodAsync("BQuery","WindowMouseOver",i)},u),window.onmouseout=c((n)=>{var i=s.toMouseEvent(n);o.invokeMethodAsync("BQuery","WindowMouseOut",i)},u),window.onmousemove=c((n)=>{var i=s.toMouseEvent(n);o.invokeMethodAsync("BQuery","WindowMouseMove",i)},u),window.onresize=c(()=>{var n=a.getWidthAndHeight();o.invokeMethodAsync("BQuery","WindowResize",n[0],n[1])},u),window.onscroll=c((n)=>{o.invokeMethodAsync("BQuery","WindowScroll",n)},u),window.onclose=(n)=>{o.invokeMethodAsync("BQuery","WindowClose",n)},window.onfocus=(n)=>{var i=s.toFocusEventArgs(n);o.invokeMethodAsync("BQuery","WindowFocus",i)},window.onblur=(n)=>{var i=s.toFocusEventArgs(n);o.invokeMethodAsync("BQuery","WindowBlur",i)},window.ontouchstart=c((n)=>{var i=s.toTouchEventArgs(n);console.log("ontouchstart",i),o.invokeMethodAsync("BQuery","WindowTouchStart",i)},u),window.ontouchmove=c((n)=>{var i=s.toTouchEventArgs(n);console.log("ontouchmove",i),o.invokeMethodAsync("BQuery","WindowTouchMove",i)},u),window.ontouchend=c((n)=>{var i=s.toTouchEventArgs(n);o.invokeMethodAsync("BQuery","WindowTouchEnd",i)},u),window.ontouchcancel=c((n)=>{var i=s.toTouchEventArgs(n);o.invokeMethodAsync("BQuery","WindowTouchCancel",i)},u),window.onkeydown=(n)=>{var i=s.toKeyboardEventArgs(n);o.invokeMethodAsync("BQuery","WindowKeyDown",i)},window.onkeypress=(n)=>{var i=s.toKeyboardEventArgs(n);o.invokeMethodAsync("BQuery","WindowKeyPress",i)},window.onkeyup=(n)=>{var i=s.toKeyboardEventArgs(n);o.invokeMethodAsync("BQuery","WindowKeyUp",i)}};(()=>{var o="3.0.2",e={version:o,...x,...C,domHelper:P,viewport:a,throttle:c,debounce:S,getUserAgent:()=>navigator.userAgent};let t=!1;var n=()=>{t||(t=!0,window.bqInit=null,console.log("bQuery is Ready"),window.bQuery=e,I())};window.bqInit=n})();